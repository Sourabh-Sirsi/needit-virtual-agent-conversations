<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__a6eef228673200100bcfb6cbda3dc950">a2eef2281b3200101a383335cc4bcb51</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"4e1e93df29aa414282d69790e142c14d","triggerType":"request","id":"4e1e93df29aa414282d69790e142c14d"}],"goals":[{"name":"primary","trigger_id":"4e1e93df29aa414282d69790e142c14d","nodes":[{"type":"StartGoal","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedItÂ  Records for a type of request."},"id":"e99411019bde4e3b9288ea47ffcad32b","name":"Start"},{"type":"TerminateGoal","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"8c52c91218b44c21acfef6a46b504fee","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"9867d6d297ea433782f6ebff912b00be","name":"NeedIt Type","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d","variable_id":"cb04b2a6040d4229b1e71305f5eb7e19","message":{"type":"String","mode":"string","value":"What type of NeedIt record would you like to view?"},"optional":false},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()"},"id":"5659120a0d3e454e87715b4ec8e59035","name":"Confirm NeedIt Type","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"3677caa5eead456aa27207e42ea11432","name":"NeedIt List","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d","variable_id":"20424a8c7047426eb059673e3d738489","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view"},"optional":false,"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"20424a8c7047426eb059673e3d738489","fields":["priority","short_description","u_when_needed"],"id":"5dcd3e09cea641f68a3b33c3a3da065c","name":"NeedIt Card","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"InputPrompt","variable_id":"68959eff87ad4e83852d9bad132dda58","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"optional":false,"id":"5e3bdbd770804029990e62fc7ddff948","name":"Search Again","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d"},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again=false"},"id":"4bda338751234ed89acedea1244c1f0b","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"6c5815ff6c654e0fb8d51e9fceac7d1c","name":"Yes"}],"id":"60272eff83fd439f9e4b7b3409c3ceb3","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d"},{"type":"InputPrompt","variable_id":"147d95fe60e546ea850b64b67830cdcd","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"optional":false,"id":"997c49f01f424dab8f94d05b9997cd41","name":"New When Needed Date","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"20424a8c7047426eb059673e3d738489","id":"55d4cc9b2df04d2e91ebd5b3997d8b78","name":"Change When Needed Date","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d"},{"type":"Decision","name":"search_count Value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()\n"},"id":"5d016933196e449a8f8cce9f7be4604c","name":"Less than 3"},{"type":"Branch","label":"3 or More","expression":{"type":"Applicability","mode":"query","value":""},"id":"361c069a11e34deb8345b66bf1f9b98a","name":"3 or More"}],"id":"b784a2b0c779402d815b7f1291d1af20","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d"},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()\n","id":"058ccc8a1c694581829fd6f31b8df41e","name":"Update search_count","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d"},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Transfer to a live agent\n\t    vaSystem.connectToAgent()\n\t})()\n","id":"03436b2a6976464e98aa0cdbf99f8bf0","name":"Transfer to Agent","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, return true\n\t    // otherwise, return false\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n\t})()\n"}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, inform users they will be transfered to a live agent\n\t    // otherwise, let them know how to work with more NeedIt records\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return 'You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.'\n\t    } else {\n\t        return 'You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\t    }\n\t})()\n"},"id":"0d0e33bb4ff5453481bfbd5813349c8c","name":"Quota Reached","goal_id":"cc223adbbf6744c6b168b79c04f7dd4d"}],"edges":[{"type":"Edge","source_node_id":"03436b2a6976464e98aa0cdbf99f8bf0","target_node_id":"8c52c91218b44c21acfef6a46b504fee","id":"1173cf5710d942489335fd9eb7cc3bdb"},{"type":"Edge","source_node_id":"b784a2b0c779402d815b7f1291d1af20","target_node_id":"9867d6d297ea433782f6ebff912b00be","branch_id":"5d016933196e449a8f8cce9f7be4604c","id":"8ea73881505c4be0b5f96aa0f31cfa52","name":"5d016933196e449a8f8cce9f7be4604c"},{"type":"Edge","source_node_id":"e99411019bde4e3b9288ea47ffcad32b","target_node_id":"9867d6d297ea433782f6ebff912b00be","id":"ba68b059a6644837bfc17d0d2f05ebe0"},{"type":"Edge","source_node_id":"9867d6d297ea433782f6ebff912b00be","target_node_id":"5659120a0d3e454e87715b4ec8e59035","id":"f8073b275216441a81d1d4afbbca8754"},{"type":"Edge","source_node_id":"5659120a0d3e454e87715b4ec8e59035","target_node_id":"3677caa5eead456aa27207e42ea11432","id":"bc473ec4c50d4384b490da516d38ca2f"},{"type":"Edge","source_node_id":"3677caa5eead456aa27207e42ea11432","target_node_id":"5dcd3e09cea641f68a3b33c3a3da065c","id":"8fcf8fc19e134a8caeab3b3bd0e60ca8"},{"type":"Edge","source_node_id":"5e3bdbd770804029990e62fc7ddff948","target_node_id":"60272eff83fd439f9e4b7b3409c3ceb3","id":"9882747b738f433a94d99cc0d6a4e69d"},{"type":"Edge","source_node_id":"60272eff83fd439f9e4b7b3409c3ceb3","target_node_id":"8c52c91218b44c21acfef6a46b504fee","branch_id":"4bda338751234ed89acedea1244c1f0b","id":"cedbd8b3c56847ac9391ac649095ec21","name":"4bda338751234ed89acedea1244c1f0b"},{"type":"Edge","source_node_id":"5dcd3e09cea641f68a3b33c3a3da065c","target_node_id":"997c49f01f424dab8f94d05b9997cd41","id":"72f6e4bbb9e540a781efc41842289b02"},{"type":"Edge","source_node_id":"997c49f01f424dab8f94d05b9997cd41","target_node_id":"55d4cc9b2df04d2e91ebd5b3997d8b78","id":"c6e14d561cb8466fb0418aab805c9dd3"},{"type":"Edge","source_node_id":"55d4cc9b2df04d2e91ebd5b3997d8b78","target_node_id":"5e3bdbd770804029990e62fc7ddff948","id":"463f5b5415af4247ae46b6146dbbba95"},{"type":"Edge","source_node_id":"60272eff83fd439f9e4b7b3409c3ceb3","target_node_id":"058ccc8a1c694581829fd6f31b8df41e","branch_id":"6c5815ff6c654e0fb8d51e9fceac7d1c","id":"fba838a7c0284d63a0d6bd5ef1d29249","name":"6c5815ff6c654e0fb8d51e9fceac7d1c"},{"type":"Edge","source_node_id":"058ccc8a1c694581829fd6f31b8df41e","target_node_id":"b784a2b0c779402d815b7f1291d1af20","id":"a659e45994e045ad9bf794efd11e8338"},{"type":"Edge","source_node_id":"b784a2b0c779402d815b7f1291d1af20","target_node_id":"0d0e33bb4ff5453481bfbd5813349c8c","branch_id":"361c069a11e34deb8345b66bf1f9b98a","id":"f8c9029a1093431f9bda827ef7f9dd40","name":"361c069a11e34deb8345b66bf1f9b98a"},{"type":"Edge","source_node_id":"0d0e33bb4ff5453481bfbd5813349c8c","target_node_id":"03436b2a6976464e98aa0cdbf99f8bf0","id":"1bd3a749828c42d9aeafe440bc7b47b3"}],"id":"cc223adbbf6744c6b168b79c04f7dd4d"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"62df0e11bc3b4e1b8d2f2d70767eb186"}],"glide_variables":[{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"cb04b2a6040d4229b1e71305f5eb7e19","name":"needit_type"},{"type":"Reference","table":"x_58872_needit_needit","id":"20424a8c7047426eb059673e3d738489","name":"needit_list"},{"type":"True/False","id":"68959eff87ad4e83852d9bad132dda58","name":"search_again"},{"type":"Date/Time","mode":"date","id":"147d95fe60e546ea850b64b67830cdcd","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"a938fb8b452447979f34d441ad736a7a","name":"change_when_needed_date"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"}],"roles":[],"scope":"999197d31b2e80101a383335cc4bcbd6","id":"7a82db571b2e80101a383335cc4bcb7b","name":"_PRVW__a6eef228673200100bcfb6cbda3dc950","key_phrases":["Update NeedIt Records","NeedIt Request"]}</design_definition>
        <design_topic_id>7a82db571b2e80101a383335cc4bcb7b</design_topic_id>
        <name>_PRVW__a6eef228673200100bcfb6cbda3dc950</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-02-03 07:02:12</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>e2ee32ac1b3200101a383335cc4bcbda</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_444489_needit_vi">999197d31b2e80101a383335cc4bcbd6</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">999197d31b2e80101a383335cc4bcbd6</sys_scope>
        <sys_update_name>sys_cb_design_topic_e2ee32ac1b3200101a383335cc4bcbda</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-02-03 07:02:12</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
